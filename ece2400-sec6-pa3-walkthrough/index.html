



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
        <meta name="author" content="Christopher Batten">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../img/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.3, mkdocs-material-3.0.3">
    
    
      
        <title>Ece2400 sec6 pa3 walkthrough - ECE 2400 Section Handouts</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../#section-6-ece-2400-pa-3-walkthrough" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="ECE 2400 Section Handouts" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                ECE 2400 Section Handouts
              </span>
              <span class="md-header-nav__topic">
                Ece2400 sec6 pa3 walkthrough
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/cornell-ece2400/ece2400-docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      cornell-ece2400/ece2400-docs
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

<nav class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
      
        
      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="ECE 2400 Section Handouts" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    ECE 2400 Section Handouts
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/cornell-ece2400/ece2400-docs/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      cornell-ece2400/ece2400-docs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../ece2400-sec1-linux/" title="Section 1: Linux Development Environment" class="md-nav__link">
      Section 1: Linux Development Environment
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ece2400-sec2-c-basics/" title="Section 2: Compiling and Running C Programs" class="md-nav__link">
      Section 2: Compiling and Running C Programs
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ece2400-sec3-c-build-test/" title="Section 3: C Build and Test Frameworks" class="md-nav__link">
      Section 3: C Build and Test Frameworks
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../ece2400-sec4-c-test-debug/" title="Section 4: C Testing and Debugging" class="md-nav__link">
      Section 4: C Testing and Debugging
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/cornell-ece2400/ece2400-docs/edit/master/docs/ece2400-sec6-pa3-walkthrough.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="section-6-ece-2400-pa-3-walkthrough">Section 6: ECE 2400 PA 3 Walkthrough<a class="headerlink" href="#section-6-ece-2400-pa-3-walkthrough" title="Permanent link">&para;</a></h1>
<p>In this discussion, we will explore two different implementations of a simple
sorting algorithm called <strong>insertion sort</strong>. We will use similar build, test,
and evaluation infrastructure as you will use in PA 3. Hopefully, after this
section, you can start working on your PA 3.</p>
<p>Follow the same process as in the previous discussion section. You need to login
to a workstation with your NetID and password. Start a terminal and then don't
forget to source the setup script!</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c">% source setup-ece2400.sh</span>
</pre></div>
</td></tr></table>

<p>Now clone the github repo for this discussion section. No need to fork the repo,
just clone it.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c">% mkdir -p ${HOME}/ece2400</span>
<span class="c">% cd ${HOME}/ece2400</span>
<span class="c">% git clone git@github.com:cornell-ece2400/ece2400-pa3-walkthrough.git sec6</span>
<span class="c">% cd sec6</span>
<span class="c">% ls</span>
</pre></div>
</td></tr></table>

<p>The repo includes the following files:</p>
<ul>
<li>CMake configuration script:</li>
<li>CMakeLists.txt</li>
<li>Header file, source file, and ad-hoc test for out-of-place insertion sort implementation:</li>
<li>src/oop-insertion-sort.h</li>
<li>src/oop-insertion-sort.c</li>
<li>src/oop-insertion-sort-main.c</li>
<li>Header file, source file, and ad-hoc test for in-place insertion sort implementation:</li>
<li>src/ip-insertion-sort.h</li>
<li>src/ip-insertion-sort.c</li>
<li>src/ip-insertion-sort-main.c</li>
<li>Test files for both implementations</li>
<li>tests/oop-insertion-sort-basic-tests.c</li>
<li>tests/oop-insertion-sort-directed-tests.c</li>
<li>tests/oop-insertion-sort-random-tests.c</li>
<li>tests/ip-insertion-sort-basic-tests.c</li>
<li>tests/ip-insertion-sort-directed-tests.c</li>
<li>tests/ip-insertion-sort-random-tests.c</li>
<li>Files containing utility functions:</li>
<li>src/utils.h</li>
<li>src/utils.c</li>
<li>tests/utst.h</li>
<li>Performance evaluation files:</li>
<li>src/sort-eval.c</li>
<li>src/sort.dat</li>
</ul>
<p>You will implement two versions of the insertion sort algorithm. The first
version is called <strong>out-of-place insertion sort (oop-insertion-sort)</strong> that uses
extra temporary space. The second version is called <strong>in-place insertion sort
(ip-insertion-sort)</strong> that does NOT use extra temporary space to sort a given
array. Here are the two functions you are about to implement:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>void oop_insertion_sort( int arr[], size_t size );
void ip_insertion_sort ( int arr[], size_t size );
</pre></div>
</td></tr></table>

<p>Both functions take as input an integer array <em>arr</em> with length <em>size</em> and sort
the array in an ascending order.</p>
<hr />
<ol>
<li>Sorted insertion</li>
</ol>
<p>Before we talk about insertion sort algorithm, let's consider the following
problem. Let's say we have an array of numbers sorted in an ascending order. We
want to insert a new number to the array such that the array remains sorted
after the insertion. For example, my array is <code>array = { 1, 4, 6, 10, 15 }</code>, and
the number to be inserted is <code>value = 5</code>. After the sorted insertion, my array
will be <code>array = { 1, 4, 5, 6, 10, 15 }</code>. How can we do that?</p>
<p>One way to do the insertion is that we look for the correct position of <em>value</em>
in <em>array</em>, which is in between <em>4</em> and <em>6</em>, insert <em>5</em> in that position, and
shift the rest of the array to the right by one position. We can do that using
the following algorithm.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>// Inputs
//    - arr   : a sorted array
//    - begin : beginning index of the array
//    - end   : index of the element after the last element in the array
//    - value : new value to be inserted
// Outputs
//    - arr   : a sorted array with 1 extra value

sorted_insert_fwd( arr, begin, end, value ):
  for i in begin to end (excluding end)
    if value &lt; arr[i]
      swap value and arr[i]
  arr[end] = value
</pre></div>
</td></tr></table>

<p>The above algorithm is called forward sorted insertion. It iterates from the
begin to the end of the array, and inserts the value into a correct position.</p>
<p><strong>Your tasks</strong>
- Implement the above algorithm inside function <code>sorted_insert_fwd</code> in
<code>src/utils.c</code>
- Write a couple of ad-hoc tests to verify the function in <code>src/sorted-insert-main.c</code>
- Can you do the insertion more efficiently?</p>
<hr />
<ol>
<li>Out-of-place insertion sort (oop-insertion-sort)</li>
</ol>
<p>We can leverage the sorted insertion algorithm in our insertion sort by taking
each element out of the input array and insert it into a sorted output array
such that the output array remains sorted. Here is the pseudocode:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>oop_insertion_sort( arr, size ):
  make an empty array called tmp_arr of size &quot;size&quot;
  for i in 0 to size (excluding size)
    sorted_insert_fwd( tmp_arr, 0, i, arr[i] )
  copy tmp_arr to arr
</pre></div>
</td></tr></table>

<p>This algorithm is out-of-place since we need an extra array of the same size to
temporarily store sorted elements.</p>
<p><strong>Your tasks</strong></p>
<ul>
<li>Implement the above algorithm in <code>oop_insertion_sort()</code> function in <code>src/oop_insertion_sort.c</code></li>
<li>Add directed and random tests to test your implementation</li>
<li>Analyze the time and space complexity of your implementation</li>
</ul>
<hr />
<ol>
<li>In-place insertion sort (ip-insertion-sort)</li>
</ol>
<p>We can do better than out-of-place insertion sort in terms of space complexity
by not using the temporary array. Instead, we can sort all elements by swapping
them directly in the original array (i.e., in place). Here is the pseudocode:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>ip_insertion_sort( arr, size )
  for i in 0 to size (excluding size)
    sorted_insert_fwd( arr, 0, i, arr[i] )
</pre></div>
</td></tr></table>

<p>This algorithm is in-place since we do NOT need an extra array of the same size
to temporarily store sorted elements.</p>
<p><strong>Your tasks</strong></p>
<ul>
<li>Implement the above algorithm in <code>ip_insertion_sort()</code> function in <code>src/ip_insertion_sort.c</code></li>
<li>Add directed and random tests to test your implementation</li>
<li>Analyze the time and space complexity of your implementation</li>
</ul>
<hr />
<ol>
<li>Evaluate both implementations</li>
</ol>
<p><strong>Your tasks</strong>
- Run the evaluation program to evaluate the performance of both implementations</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="c">% cd ${HOME}/ece2400/sec6</span>
<span class="c">% mkdir -p build-eval</span>
<span class="c">% cmake .. -DCMAKE_BUILD_TYPE=RELEASE</span>
<span class="c">% make eval</span>
</pre></div>
</td></tr></table>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 Christopher Batten
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0.3",url:{base:".."}})</script>
      
        <script src="../js/extras.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
    
      
    
  </body>
</html>